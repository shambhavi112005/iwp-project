<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fully Interconnected Project Portal</title>
<style>
/* CSS has been updated for better table presentation */
body{font-family:'Segoe UI',sans-serif;margin:0;padding:0;background-image:url('collegebuilding.jpg');background-size:cover;background-position:center center;background-attachment:fixed;color:white}
.overlay{background-color:rgba(0,0,0,0.65);min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;box-sizing:border-box}
.main-header{text-align:center;margin-bottom:20px}
.logo{width:150px;height: auto;margin-bottom:10px}
.university-title{font-size:48px;font-weight:bold;letter-spacing:2px;text-shadow:2px 2px 4px rgba(0,0,0,0.5)}
.quote{text-align:center;font-style:italic;font-size:24px;max-width:800px;margin-bottom:40px}
.page-view{display:none;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}
.content-box{text-align:center;padding:20px;width:100%;max-width:450px}
.content-box h2{font-size:28px;font-weight:500;margin-bottom:25px}
input[type="text"],input[type="email"],input[type="password"],input[type="number"],textarea{width:100%;padding:15px;margin-bottom:20px;border-radius:8px;border:none;font-size:16px;box-sizing:border-box}
textarea{resize:vertical;min-height:80px;font-family:'Segoe UI',sans-serif}
.button-group{display:flex;justify-content:center;gap:10px;flex-wrap:wrap}
.button{display:inline-block;background-color:#9370db;color:white!important;text-decoration:none;border:none;padding:15px 0;width:170px;border-radius:10px;font-size:18px;cursor:pointer;text-align:center;transition:background-color .2s ease-in-out}
.button:hover{background-color:#7b58c7}
.button.back-button,.button.logout-button{background-color:#6c757d}
.button.back-button:hover,.button.logout-button:hover{background-color:#5a6268}
.button.save-button{background-color:#28a745}
.button.save-button:hover{background-color:#218838}
.class-selection .button{font-size:22px;padding:25px 10px;width:250px;margin:10px}
    /* MODIFIED: Increased max-width for the main content box to make the table wider */
    .data-container{background-color:rgba(255,255,255,0.98);color:#333;padding:30px 40px;border-radius:15px;width:90%;max-width:1200px;box-shadow:0 4px 15px rgba(0,0,0,0.2);text-align:left}
    
    .data-container h2,.data-container h3{color:#000;font-weight:bold;margin-bottom:20px;text-align:center}
    
    /* NEW & MODIFIED: Styles for a more presentable table */
    .group-table{width:100%;border-collapse:collapse;margin-top:20px;table-layout:fixed; /* Ensures column widths are respected */}
    .group-table th,.group-table td{border:1px solid #dee2e6;padding:16px;text-align:left;vertical-align:middle; /* Better alignment for multi-line content */}
    .group-table thead{background-color:#e9ecef;}
    .group-table thead th { font-size:16px; font-weight: 600; color: #343a40; text-transform: uppercase; letter-spacing: 0.5px; }
    .group-table tbody tr:nth-child(even){background-color:#f8f9fa}
    
    /* NEW: Hover effect for table rows */
    .group-table tbody tr:hover { background-color: #e2f3ff; cursor: pointer; }
    
    .group-table td a{color:#007bff;text-decoration:none;font-weight:bold;display:block; /* Makes the whole cell clickable area feel more responsive */}
    .group-table td a:hover{text-decoration:underline}
    
    /* NEW: Column width definitions */
    .col-group-no { width: 10%; }
    .col-project-title { width: 65%; }
    .col-guide-name { width: 25%; }

    .details-section p{margin:8px 0;font-size:18px}
    .details-section p strong{min-width:150px;display:inline-block}
    .group-members-list { list-style-type: none; padding-left: 0; }
    .group-members-list li { background-color: #f8f9fa; padding: 10px; border-radius: 5px; margin-bottom: 5px; border: 1px solid #e9ecef; }
    .status-marquee{font-size:18px;color:#0056b3;font-weight:500;padding:10px;background-color:#cce5ff;border-radius:5px;border:1px solid #b8daff;margin:20px 0}
    .interactive-section{margin-top:25px;padding-top:20px;border-top:1px solid #dee2e6}
    .interactive-section label{font-weight:bold;font-size:18px;display:block;margin-bottom:10px}
</style>
</head>
<body>
<div class="overlay">
        <div id="main-header">
         <header class="main-header"><img src="logo.jpg" alt="University Logo" class="logo"><div class="university-title">CHRIST UNIVERSITY</div></header>
         <div class="quote">"Final Year Projects are the launchpads to real-world innovation and engineering mastery."</div>
    </div>

    <!-- ======================= ALL PAGE VIEWS ======================= -->

    <!-- PAGE 1: LANDING -->
    <section id="page-landing" class="page-view">
        <div class="content-box">
            <h2>Select Your Role</h2>
            <div class="button-group">
                <a class="button" onclick="showPage('page-student-login')">Student</a>
                <a class="button" onclick="showPage('page-teacher-login')">Teacher</a>
            </div>
        </div>
    </section>

    <!-- PAGE 2: STUDENT LOGIN -->
    <section id="page-student-login" class="page-view">
        <div class="content-box">
            <h2>Login as Student</h2>
            <input type="text" id="student-login-regno" placeholder="Enter Register Number" required>
            <input type="password" id="student-login-password" placeholder="Enter Password ">
            <div class="button-group">
                <button type="button" class="button" onclick="handleStudentLogin()">Login</button>
                <a class="button back-button" onclick="showPage('page-landing')">Back</a>
            </div>
        </div>
    </section>

    <!-- PAGE 3: TEACHER LOGIN -->
    <section id="page-teacher-login" class="page-view">
        <div class="content-box">
            <h2>Login as Teacher</h2>
            <input type="text" placeholder="Enter Username">
            <input type="password" placeholder="Enter Password">
            <div class="button-group">
                <button type="button" class="button" onclick="showPage('page-teacher-dashboard')">Login</button>
                <a class="button back-button" onclick="showPage('page-landing')">Back</a>
            </div>
        </div>
    </section>

    <!-- PAGE 4: STUDENT DASHBOARD -->
    <section id="page-student-dashboard" class="page-view">
        <div class="data-container" style="max-width: 900px;"> <!-- Kept student view slightly smaller -->
            <h2 id="student-dash-welcome"></h2>
            <div class="details-section">
                <p><strong>Registration No:</strong> <span id="student-dash-regno"></span></p>
                <p><strong>Project Topic:</strong> <span id="student-dash-topic"></span></p>
                <p><strong>Guide Name:</strong> <span id="student-dash-guide"></span></p>
            </div>
            <div class="interactive-section">
                <label for="student-dash-status-update">Update Project Completion Status:</label>
                <textarea id="student-dash-status-update" placeholder="E.g., 'Completed the initial module and pushed to GitHub.'"></textarea>
                <button class="button save-button" onclick="updateGroupStatus()">Update Status</button>
            </div>
            <div class="interactive-section">
                 <p><strong>Marks Awarded by Teacher:</strong> <span id="student-dash-marks" style="font-weight:bold; color:#28a745;"></span></p>
            </div>
            <div class="button-group" style="margin-top: 30px;">
                <a class="button logout-button" onclick="logout()">Logout</a>
            </div>
        </div>
    </section>
    
    <!-- PAGE 5: TEACHER DASHBOARD -->
    <section id="page-teacher-dashboard" class="page-view">
        <div class="content-box" style="max-width: 800px;">
            <h2>Select Class for Project Review</h2>
            <div class="button-group class-selection">
                <a class="button" onclick="renderGroupList(); showPage('page-group-list');">5BTCSDS Project Groups</a>
            </div>
            <div class="button-group" style="margin-top: 40px;"><a class="button logout-button" onclick="logout()">Logout</a></div>
        </div>
    </section>

    <!-- PAGE 6: PROJECT GROUP LIST -->
    <section id="page-group-list" class="page-view">
        <div class="data-container">
            <h2>Project Group List - 5BTCSDS</h2>
            <table class="group-table">
                <!-- MODIFIED: Added classes to table headers to control column width -->
                <thead>
                    <tr>
                        <th class="col-group-no">Group No</th>
                        <th class="col-project-title">Project Title</th>
                        <th class="col-guide-name">Guide Name</th>
                    </tr>
                </thead>
                <tbody id="group-list-body"></tbody>
            </table>
            <div class="button-group" style="margin-top: 30px; justify-content: flex-start;"><a class="button back-button" onclick="showPage('page-teacher-dashboard')">Back</a></div>
        </div>
    </section>
    
    <!-- PAGE 7: TEACHER'S VIEW OF GROUP PROGRESS -->
    <section id="page-group-details-view" class="page-view">
        <div class="data-container" style="max-width: 900px;">
            <h2 id="group-view-title"></h2>
            <div class="details-section">
                <p><strong>Guide Name:</strong> <span id="group-view-guide"></span></p>
            </div>
            
            <div class="interactive-section">
                <h3>Group Members</h3>
                <ul id="group-members-list" class="group-members-list"></ul>
            </div>

            <div class="status-marquee">
                <p style="margin:0; font-weight:bold;">Project Completion Update:</p>
                <p style="margin:0;" id="group-view-status"></p>
            </div>

            <div class="interactive-section">
                <h3>Performance Evaluation</h3>
                <label for="marks-input">Enter/Update Marks for the Group (out of 100):</label>
                <input type="number" id="marks-input" min="0" max="100" placeholder="e.g., 85">
                <button class="button save-button" onclick="saveMarks()">Save Marks</button>
            </div>

            <div class="button-group" style="margin-top: 30px; justify-content: flex-start;"><a class="button back-button" onclick="showPage('page-group-list')">Back to Group List</a></div>
        </div>
    </section>
</div>

<script>
// ======================= GROUP-BASED SINGLE SOURCE OF TRUTH =======================
const projectGroups = [
    {
        groupId: 1,
        projectTitle: "Website for the AIML and Data Science departments, integrates the modules for academics, labs, attendance, project tracking, and faculty-student data. It streamlines curriculum planning, resource management, and performance evaluation through a centralized web system.",
        guideName: "Dr. Michael Moses T",
        status: "Started",
        marks: null,
        students: [
            { regNo: '2362376', name: 'Tenzin Palden Bhutia' },
            { regNo: '2362325', name: 'Drishya S Menon' },
            { regNo: '2362333', name: 'Hrishikesh Romesh' },
            { regNo: '2362366', name: 'Somalaraju Sai Bhuvana' }
        ]
    },
    {
        groupId: 2,
        projectTitle: "An ERP module for department research and publications manages faculty and student research activities, tracks publications, and maintains a centralized repository.",
        guideName: "Dr. Sandeep Kumar",
        status: "Started",
        marks: null,
        students: [
            { regNo: '2362349', name: 'Nicholas Briggs' },
            { regNo: '2362378', name: 'Neha Simon' },
            { regNo: '2362352', name: 'Prashaant C' },
            { regNo: '2362337', name: 'Joseph John' },
            { regNo: '2362368', name: 'Stephen Akash' },
            { regNo: '2362310', name: 'Alwin J' }
        ]
    },
    {
        groupId: 3,
        projectTitle: "Web Application tool for student mentoring facilitates mentor-mentee meetings, tracks meeting records, academic progress, and personal development.",
        guideName: "Dr. Sandeep Kumar",
        status: "Initial framework designed.",
        marks: null,
        students: [
            { regNo: '2362085', name: 'James Reji Eyyalil' },
            { regNo: '2362364', name: 'Shambhavi Jaguri' },
            { regNo: '2362152', name: 'Saksham Insan' },
            { regNo: '2362324', name: 'Diya Chouhan' }
        ]
    },
    {
        groupId: 4,
        projectTitle: "Web Application tools to monitor the progress, effectiveness, and Assessment of final year Project Evaluation.",
        guideName: "Dr. Bijeesh T V",
        status: "Awaiting first review.",
        marks: 88,
        students: [
            { regNo: '2362360', name: 'Riya Bajaj' },
            { regNo: '2362319', name: 'Bhoomika Jain' },
            { regNo: '2362372', name: 'Suhaas K' },
            { regNo: '2362374', name: 'Tanmay Tejaswi' }
        ]
    },
     {
        groupId: 5,
        projectTitle: "Web Application tools to monitor the progress, effectiveness, and Assessment of Internship Evaluation.",
        guideName: "Dr. Arul V",
        status: "Completed",
        marks: 93,
        students: [
            { regNo: '2362355', name: 'Rahul S' },
            { regNo: '2362357', name: 'Rewin Arokiya Raj E' },
            { regNo: '2362315', name: 'B K Nandeish' }
        ]
    },
    {
        groupId: 6,
        projectTitle: "Web application tool for student placements manages company registrations, student profiles, eligibility matching, and interview scheduling.",
        guideName: "Dr. Vigneshwar",
        status: "UI/UX design phase.",
        marks: null,
        students: [
            { regNo: '2362332', name: 'Harshitha N Reddy' },
            { regNo: '2362321', name: 'Chillangi Niranjan Reddy' },
            { regNo: '2362316', name: 'B Karthikeswara Reddy' },
            { regNo: '2362362', name: 'S Dharun Balaji' },
            { regNo: '2362188', name: 'V M Vignesh' }
        ]
    },
    {
        groupId: 7,
        projectTitle: "A web application for lab exams to support role-based access, student and faculty assignment, live monitoring of marks entered and result management for efficient exam administration.",
        guideName: "Chaitra",
        status: "Backend API development in progress.",
        marks: null,
        students: [
            { regNo: '2362356', name: 'Rajasree PB' },
            { regNo: '2362311', name: 'Anlet Elsa Anto' },
            { regNo: '2362329', name: 'Gopika D' },
            { regNo: '2362347', name: 'Nevin Joseph' },
            { regNo: '2362353', name: 'R Surya' }
        ]
    },
    {
        groupId: 14,
        projectTitle: "An individual faculty profile website is created to showcase the detailed information about each faculty member, including qualifications, research interests, publications, courses handled, and contact details.",
        guideName: "Dr. Mary Anitha / Dr. Michael Moses T",
        status: "Final testing phase.",
        marks: 95,
        students: [
            { regNo: '2362312', name: 'Anuj Kaiprath' },
            { regNo: '2362303', name: 'Adhish Shimmy' },
            { regNo: '2362322', name: 'Daniel Paul Baby' },
            { regNo: '2362339', name: 'Karthik Krishnan' },
            { regNo: '2362361', name: 'Ron Ranjit' }
        ]
    }
];

let currentTeacherViewingGroupId = null;
let loggedInStudentInfo = null;
let loggedInGroupId = null;

// ======================= CORE APP LOGIC =======================
const mainHeader = document.getElementById('main-header');
const allPages = document.querySelectorAll('.page-view');

function showPage(pageId) {
    allPages.forEach(page => { page.style.display = 'none'; });
    const targetPage = document.getElementById(pageId);
    if(targetPage) {
        targetPage.style.display = 'flex';
    }
    const isDetailedPage = !['page-landing', 'page-student-login', 'page-teacher-login'].includes(pageId);
    mainHeader.style.display = isDetailedPage ? 'none' : 'block';
}

function logout() {
    loggedInStudentInfo = null;
    loggedInGroupId = null;
    currentTeacherViewingGroupId = null;
    document.getElementById('student-login-regno').value = '';
    document.getElementById('student-login-password').value = '';
    showPage('page-landing');
}

// ======================= STUDENT-FACING FUNCTIONS =======================
function handleStudentLogin() {
    const regNo = document.getElementById('student-login-regno').value;
    let studentFound = false;

    for (const group of projectGroups) {
        const student = group.students.find(s => s.regNo === regNo);
        if (student) {
            loggedInStudentInfo = student;
            loggedInGroupId = group.groupId;
            studentFound = true;
            break;
        }
    }

    if (studentFound) {
        renderStudentDashboard();
    } else {
        alert('Login failed. Please check your Register Number.');
    }
}

function renderStudentDashboard() {
    if (!loggedInStudentInfo || loggedInGroupId === null) return;
    const group = projectGroups.find(g => g.groupId === loggedInGroupId);
    if (!group) return;

    document.getElementById('student-dash-welcome').innerText = `Welcome, ${loggedInStudentInfo.name.split(' ')[0]}!`;
    document.getElementById('student-dash-regno').innerText = loggedInStudentInfo.regNo;
    document.getElementById('student-dash-topic').innerText = group.projectTitle;
    document.getElementById('student-dash-guide').innerText = group.guideName;
    document.getElementById('student-dash-status-update').value = group.status;
    document.getElementById('student-dash-marks').innerText = group.marks !== null ? `${group.marks} / 100` : 'Not Graded Yet';
    
    showPage('page-student-dashboard');
}

function updateGroupStatus() {
    if (loggedInGroupId === null) return;
    const group = projectGroups.find(g => g.groupId === loggedInGroupId);
    if (!group) return;

    const newStatus = document.getElementById('student-dash-status-update').value;
    group.status = newStatus;
    alert('Your group project status has been updated successfully!');
}

// ======================= TEACHER-FACING FUNCTIONS =======================
function renderGroupList() {
    const tableBody = document.getElementById('group-list-body');
    tableBody.innerHTML = ''; // Clear previous list
    projectGroups.forEach(group => {
        const row = `<tr onclick="showGroupDetailsView(${group.groupId})">
            <td><a>Group ${group.groupId}</a></td>
            <td>${group.projectTitle}</td>
            <td>${group.guideName}</td>
        </tr>`;
        tableBody.innerHTML += row;
    });
}

function showGroupDetailsView(groupId) {
    currentTeacherViewingGroupId = groupId;
    const group = projectGroups.find(g => g.groupId === groupId);

    if (group) {
        document.getElementById('group-view-title').innerText = group.projectTitle;
        document.getElementById('group-view-guide').innerText = group.guideName;
        document.getElementById('group-view-status').innerText = group.status;
        
        const membersList = document.getElementById('group-members-list');
        membersList.innerHTML = '';
        group.students.forEach(student => {
            membersList.innerHTML += `<li>${student.name} (${student.regNo})</li>`;
        });

        document.getElementById('marks-input').value = group.marks || '';
        showPage('page-group-details-view');
    }
}

function saveMarks() {
    if (currentTeacherViewingGroupId !== null) {
        const group = projectGroups.find(g => g.groupId === currentTeacherViewingGroupId);
        const marksValue = document.getElementById('marks-input').value;

        if (group) {
            group.marks = marksValue ? parseInt(marksValue, 10) : null;
            alert(`Marks for Group ${group.groupId} have been updated to ${group.marks !== null ? group.marks : 'N/A'}.`);
        }
    }
}

// --- INITIALIZATION ---
document.addEventListener('DOMContentLoaded', () => { showPage('page-landing'); });
</script>
</body>
</html>